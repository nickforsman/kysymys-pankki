(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports=n(31)},20:function(e,t,n){},22:function(e,t,n){},24:function(e,t,n){},26:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(12),c=n.n(s),o=(n(20),n(13)),u=n(5),i=n(6),l=n(8),p=n(7),h=n(9),m=n(33),d=n(34),f=n(35),E=(n(22),n(24),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={question:{},answers:[],answer:"",correct:!1},n.deleteQuestion=function(){window.confirm("Oletko varma?")&&fetch("/api/questions/".concat(n.props.match.params.id),{method:"DELETE"}).then(function(){n.props.fetchQuestions(),n.props.history.push("/")}).catch(function(e){n.props.setError(e)})},n.deleteAnswer=function(e){fetch("/api/questions/".concat(n.props.match.params.id,"/answers/").concat(e),{method:"DELETE"}).then(function(){return n.fetchQuestion()}).catch(function(e){n.props.setError(e)})},n.addAnswer=function(e){e.preventDefault();var t=new URLSearchParams;t.append("answer",n.state.answer),t.append("correct",n.state.correct),fetch("/api/questions/".concat(n.props.match.params.id,"/answers"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:t.toString()}).then(function(){return n.fetchQuestion()}).then(function(){return n.setState({answer:"",correct:!1})}).catch(function(e){n.props.setError(e)})},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchQuestion()}},{key:"componentDidUpdate",value:function(e,t){this.props.match.params.id!==e.match.params.id&&this.fetchQuestion()}},{key:"fetchQuestion",value:function(){var e=this;return fetch("/api/questions/".concat(this.props.match.params.id)).then(function(e){return e.json()}).then(function(t){return e.setState({question:t}),fetch("/api/questions/".concat(e.props.match.params.id,"/answers"))}).then(function(e){return e.json()}).then(function(t){e.setState({answers:t})}).catch(function(t){e.props.setError(t)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Question"},r.a.createElement("div",{className:"Question-header"},r.a.createElement("div",null,r.a.createElement("h2",null,"Kysymys:"),r.a.createElement("p",{className:"Question-text"},this.state.question.text)),r.a.createElement("button",{className:"Question-delete",onClick:this.deleteQuestion},"Poista Kysymys")),r.a.createElement("div",{className:"Question-answers"},r.a.createElement("h3",null,"Vastaukset:"),this.state.answers.map(function(t,n){return r.a.createElement("div",{key:n},r.a.createElement("span",null,t.text),r.a.createElement("button",{onClick:e.deleteAnswer.bind(null,t.id)},"X"))})),r.a.createElement("hr",null),r.a.createElement("form",{className:"Question-form",onSubmit:this.addAnswer},r.a.createElement("legend",null,"Lis\xe4\xe4 Vastaus"),r.a.createElement("div",null,r.a.createElement("label",null,"Vastaus"),r.a.createElement("input",{placeholder:"vastaus",value:this.state.answer,required:!0,onChange:function(t){return e.setState({answer:t.target.value})}})),r.a.createElement("div",null,r.a.createElement("label",null,"Oikea vastaus",r.a.createElement("input",{type:"checkbox",onChange:function(t){return e.setState({correct:"on"===t.target.value})}}))),r.a.createElement("button",null,"Lis\xe4\xe4")),r.a.createElement("hr",null))}}]),t}(a.Component)),b=(n(26),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={subject:"",text:"",course:""},n.addQuestion=function(e){e.preventDefault();var t=new URLSearchParams;return t.append("subject",n.state.subject),t.append("course",n.state.course),t.append("text",n.state.text),fetch("/api/questions",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},mode:"no-cors",body:t.toString()}).then(function(){n.props.fetchQuestions(),n.setState({subject:"",text:"",course:""})}).catch(function(e){n.props.setError(e)})},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"Form",onSubmit:this.addQuestion},r.a.createElement("legend",null,"Lis\xe4\xe4 Kysymys"),r.a.createElement("div",null,r.a.createElement("label",null,"Aihe:"),r.a.createElement("input",{value:this.state.subject,onChange:function(t){return e.setState({subject:t.target.value})},required:!0,placeholder:"Aihe",type:"text"})),r.a.createElement("div",null,r.a.createElement("label",null,"Kurssi"),r.a.createElement("input",{value:this.state.course,onChange:function(t){return e.setState({course:t.target.value})},required:!0,placeholder:"Kurssi",type:"text"})),r.a.createElement("div",null,r.a.createElement("label",null,"Kysymys:"),r.a.createElement("textarea",{rows:"5",cols:"50",value:this.state.text,onChange:function(t){return e.setState({text:t.target.value})},required:!0})),r.a.createElement("button",null,"Lis\xe4\xe4"))}}]),t}(a.Component)),v=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={questions:{},error:""},n.setError=function(e){console.log(e)},n.makeQuestionMap=function(e){return e.reduce(function(e,t){return e[t.course]?e[t.course][t.subject]?e[t.course][t.subject].push({text:t.text,id:t.id}):(e[t.course][t.subject]=[],e[t.course][t.subject].push({text:t.text,id:t.id})):e[t.course]=Object(o.a)({},t.subject,[{text:t.text,id:t.id}]),e},{})},n.fetchQuestions=function(){return fetch("/api/questions").then(function(e){return e.json()}).then(n.makeQuestionMap).then(function(e){return n.setState({questions:e})})},n.renderQuestions=function(){return 0===Object.keys(n.state.questions).length?r.a.createElement("ul",null):r.a.createElement("ul",null,Object.keys(n.state.questions).map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("h3",null,e),Object.keys(n.state.questions[e]).map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("h4",null,t),n.state.questions[e][t].map(function(e){return r.a.createElement(m.a,{key:a,to:"/question/".concat(e.id)},e.text)}))}))}))},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchQuestions()}},{key:"render",value:function(){var e=this;return r.a.createElement(d.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App-sidebar"},this.renderQuestions()),r.a.createElement("div",{className:"App-content"},r.a.createElement(f.a,{path:"/question/:id",component:function(t){return r.a.createElement(E,Object.assign({setError:e.setError,fetchQuestions:e.fetchQuestions},t))}}),r.a.createElement(b,{setError:this.setError,fetchQuestions:this.fetchQuestions}))))}}]),t}(a.Component);c.a.render(r.a.createElement(v,null),document.getElementById("root"))}},[[15,2,1]]]);
//# sourceMappingURL=main.8519850b.chunk.js.map