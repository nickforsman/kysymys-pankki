{"version":3,"sources":["Question.js","Form.js","App.js","index.js"],"names":["Question","state","question","answers","answer","correct","deleteQuestion","window","confirm","fetch","concat","_this","props","match","params","id","method","then","fetchQuestions","history","push","catch","err","setError","deleteAnswer","fetchQuestion","addAnswer","e","preventDefault","data","URLSearchParams","append","headers","Accept","Content-Type","body","toString","setState","this","prevProps","prevState","_this2","res","json","_this3","react_default","a","createElement","className","text","onClick","map","i","key","bind","onSubmit","placeholder","value","required","onChange","target","type","Component","Form","subject","course","addQuestion","mode","rows","cols","App","questions","error","console","log","makeQuestionMap","reduce","acc","next","Object","defineProperty","renderQuestions","keys","length","index","Link","to","BrowserRouter","Route","path","component","src_Question_0","assign","src_Form_0","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.8519850b.chunk.js","sourcesContent":["import React, { Component } from 'react';\n\nimport './Question.css';\n\nclass Question extends Component {\n  state = {\n    question: {},\n    answers: [],\n    answer: '',\n    correct: false\n  }\n\n  componentDidMount() {\n    this.fetchQuestion();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.match.params.id !== prevProps.match.params.id) {\n      this.fetchQuestion();\n    }\n  }\n\n  fetchQuestion() {\n    return fetch(`/api/questions/${this.props.match.params.id}`)\n      .then(res => res.json())\n      .then(question => {\n        this.setState({question})\n        return fetch(`/api/questions/${this.props.match.params.id}/answers`)\n      })\n      .then(res => res.json())\n      .then(answers => {\n        this.setState({answers});\n      })\n      .catch(err => {\n        this.props.setError(err);\n      });\n  }\n\n  deleteQuestion = () => {\n    const yes = window.confirm(\"Oletko varma?\");\n\n    if (yes) {\n        fetch(`/api/questions/${this.props.match.params.id}`, {\n          method: 'DELETE'\n        })\n        .then(() => {\n            this.props.fetchQuestions();\n            this.props.history.push(\"/\");\n        })\n        .catch(err => {\n            this.props.setError(err);\n        });\n    }\n  }\n\n  deleteAnswer = (id) => {\n    fetch(`/api/questions/${this.props.match.params.id}/answers/${id}`, {\n      method: 'DELETE'\n    })\n    .then(() => this.fetchQuestion())\n    .catch(err => {\n        this.props.setError(err)\n    });\n  }\n\n  addAnswer = (e) => {\n    e.preventDefault();\n\n    const data = new URLSearchParams();\n    data.append('answer', this.state.answer);\n    data.append('correct', this.state.correct);\n\n    fetch(`/api/questions/${this.props.match.params.id}/answers`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'\n      },\n      body: data.toString()\n    })\n    .then(() => this.fetchQuestion())\n    .then(() => this.setState({answer: '', correct: false}))\n    .catch(err => {\n        this.props.setError(err);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"Question\">\n        <div className=\"Question-header\">\n            <div>\n                <h2>Kysymys:</h2>\n                <p className=\"Question-text\">{this.state.question.text}</p>\n            </div>\n            <button className=\"Question-delete\" onClick={this.deleteQuestion}>Poista Kysymys</button>\n        </div>\n        <div className=\"Question-answers\">\n            <h3>Vastaukset:</h3>\n            {this.state.answers.map((i, key) => {\n              return <div key={key}>\n                <span>\n                  {i.text}\n                </span>\n                <button onClick={this.deleteAnswer.bind(null, i.id)}>X</button>\n              </div>\n            })}\n        </div>\n        <hr />\n        <form className=\"Question-form\" onSubmit={this.addAnswer}>\n          <legend>Lisää Vastaus</legend>\n          <div>\n            <label>Vastaus</label>\n            <input placeholder=\"vastaus\" value={this.state.answer} required onChange={(e) => this.setState({answer: e.target.value})} />\n          </div>\n          <div>\n            <label>\n              Oikea vastaus\n              <input type=\"checkbox\" onChange={(e) => this.setState({correct: e.target.value === \"on\"})} />\n            </label>\n          </div>\n          <button>Lisää</button>\n        </form>\n        <hr />\n      </div>\n    );\n  }\n}\n\nexport default Question;\n","import React, { Component } from 'react';\n\nimport './Form.css';\n\nclass Form extends Component {\n  state = {\n    subject: '',\n    text: '',\n    course: ''\n  }\n\n  addQuestion = (e) => {\n    e.preventDefault();\n\n    const data = new URLSearchParams();\n    data.append('subject', this.state.subject);\n    data.append('course', this.state.course);\n    data.append('text', this.state.text);\n\n    return fetch('/api/questions', {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'\n      },\n      mode: 'no-cors',\n      body: data.toString()\n    }).then(() => {\n      this.props.fetchQuestions();\n      this.setState({subject: '', text: '', course: ''});\n    })\n    .catch(err => {\n        this.props.setError(err);\n    });\n  }\n\n  render() {\n    return (\n      <form className=\"Form\" onSubmit={this.addQuestion}>\n        <legend>Lisää Kysymys</legend>\n        <div>\n            <label>Aihe:</label>\n            <input value={this.state.subject} onChange={(e) => this.setState({subject: e.target.value})} required placeholder=\"Aihe\" type=\"text\" />\n        </div>\n        <div>\n            <label>Kurssi</label>\n            <input value={this.state.course} onChange={(e) => this.setState({course: e.target.value})} required placeholder=\"Kurssi\" type=\"text\"/>\n        </div>\n        <div>\n            <label>Kysymys:</label>\n            <textarea rows=\"5\" cols=\"50\" value={this.state.text} onChange={(e) => this.setState({text: e.target.value})} required></textarea>\n        </div>\n        <button>Lisää</button>\n      </form>\n    );\n  }\n}\n\nexport default Form;\n","import React, { Component } from 'react';\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\n\nimport './App.css';\nimport Question from './Question';\nimport Form from './Form';\n\nclass App extends Component {\n  state = {\n    questions: {},\n    error: ''\n  }\n\n  setError = (error) => {\n    console.log(error);\n  }\n\n  componentDidMount() {\n    this.fetchQuestions();\n  }\n\n  makeQuestionMap = (data) => {\n    return data.reduce((acc, next) => {\n        if (acc[next.course]) {\n            if (acc[next.course][next.subject]) {\n                acc[next.course][next.subject].push({text: next.text, id: next.id});\n            } else {\n                acc[next.course][next.subject] = [];\n                acc[next.course][next.subject].push({text: next.text, id: next.id});\n            }\n        } else {\n            acc[next.course] = {[next.subject]: [{text: next.text, id: next.id}]};\n        }\n\n        return acc;\n    }, {});\n  }\n\n  fetchQuestions = () => {\n    return fetch('/api/questions')\n      .then(res => res.json())\n      .then(this.makeQuestionMap)\n      .then(questions => this.setState({ questions }));\n  }\n\n  renderQuestions = () => {\n    if (Object.keys(this.state.questions).length === 0) {\n        return <ul></ul>;\n    }\n\n    return (\n        <ul>\n          {Object.keys(this.state.questions).map((course, index) => {\n            return (\n                <li key={index}>\n                    <h3>{course}</h3>\n                    {Object.keys(this.state.questions[course]).map((subject, index) => {\n                      return (\n                          <div key={index}>\n                              <h4>{subject}</h4>\n                              {this.state.questions[course][subject].map((question => {\n                                return (\n                                  <Link key={index} to={`/question/${question.id}`}>\n                                      {question.text}\n                                  </Link>\n                                );\n                              }))}\n                          </div>\n                      );\n                    })}\n                </li>\n            );\n          })}\n        </ul>\n    );\n  }\n\n  render() {\n    return (\n      <Router>\n        <div className=\"App\">\n          <div className=\"App-sidebar\">\n            {this.renderQuestions()}\n          </div>\n          <div className=\"App-content\">\n              <Route path=\"/question/:id\" component={(props) => <Question setError={this.setError} fetchQuestions={this.fetchQuestions} {...props}/>} />\n              <Form setError={this.setError} fetchQuestions={this.fetchQuestions}/>\n          </div>\n        </div>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}